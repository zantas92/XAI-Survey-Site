{"ast":null,"code":"import React from'react';import'../../../css/App.css';import Navbar from'../../../components/Navbar';import Footer from'../../../components/Footer';import{useNavigate}from'react-router-dom';import Button from'react-bootstrap/Button';import{useEffect}from\"react\";import $ from'jquery';import colorspectrum from'../../../images/raw/large/Spectrum.png';import Create3DArray from'../../../utils/Create3DArray';import GetImageData from'../../../utils/GetImageData';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var ImageMarking=function ImageMarking(){var index=1;var navigate=useNavigate();var userData=undefined;var testActive=false;useEffect(function(){document.getElementById(\"animal\").innerHTML=GetImageData(index-1)[1];if(window.sessionStorage.getItem('pixelData')==null){userData=Create3DArray(5,7,7);window.sessionStorage.setItem('pixelData',JSON.stringify(userData));}else{userData=JSON.parse(window.sessionStorage.getItem('pixelData'));}createPixelMask();SetImageValues();},[]);function SetImageValues(){var table=document.getElementById('pixel_Table');var row;for(var i=0,row;row=table.rows[i];i++){for(var j=0,col;col=row.cells[j];j++){if(userData[index-1][i][j]!=null){$(col).css(\"opacity\",userData[index-1][i][j]);}else{$(col).css(\"opacity\",\"0.0\");}}}document.getElementById(\"pixel_Table\").style.backgroundImage='url('+GetImageData(index-1)[0]+')';}function createPixelMask(){var table=document.getElementById(\"pixel_Table\");var row;var cell;for(var i=0;i<7;i++){row=table.insertRow(i);for(var j=0;j<7;j++){cell=row.insertCell(j);cell.addEventListener('click',IncreaseOpacity);cell.addEventListener('contextmenu',DecreaseOpacity);}}}function DecreaseOpacity(event){if(!testActive){event.preventDefault();var opacity_level=parseFloat($(event.target).css(\"opacity\"));if(opacity_level>\"0.25\"){opacity_level=opacity_level-0.50;$(event.target).css(\"opacity\",opacity_level);}else if(opacity_level>\"0.0\"){opacity_level=opacity_level-0.25;$(event.target).css(\"opacity\",opacity_level);}}}function IncreaseOpacity(event){if(!testActive){var opacity_level=parseFloat($(event.target).css(\"opacity\"));if(opacity_level<\"0.25\"){opacity_level=opacity_level+0.25;}else if(opacity_level<\"0.75\"){opacity_level=opacity_level+0.50;}else{opacity_level=0.0;}$(event.target).css(\"opacity\",opacity_level);}}function NextImage(){saveData();if(index==5){Next();}else{index=index+1;var imageCount=index;document.getElementById(\"headline\").innerHTML=\"Bild \"+imageCount+\" av 5\";document.getElementById(\"animal\").innerHTML=GetImageData(index-1)[1];SetImageValues();testActive=true;changeOpacity();}}function PreviousImage(){saveData();if(index==1){navigate('/home');}else{index=index-1;var imageCount=index;document.getElementById(\"headline\").innerHTML=\"Bild \"+imageCount+\" av 5\";document.getElementById(\"animal\").innerHTML=GetImageData(index-1)[1];SetImageValues();testActive=true;changeOpacity();}}function saveData(){var table=document.getElementById('pixel_Table');for(var i=0,row;row=table.rows[i];i++){for(var j=0,col;col=row.cells[j];j++){if(parseFloat($(col).css(\"opacity\"))==\"1.0\"){userData[index-1][i][j]=\"0.0\";}else{userData[index-1][i][j]=$(col).css(\"opacity\");}}}window.sessionStorage.setItem('pixelData',JSON.stringify(userData));}function Next(){navigate('/survey/image-ranking');}function changeOpacity(){var table=document.getElementById('pixel_Table');var row;for(var i=0,row;row=table.rows[i];i++){for(var j=0,col;col=row.cells[j];j++){if(testActive){if(parseFloat($(col).css(\"opacity\"))==\"1.0\"){$(col).css(\"opacity\",\"0.0\");}$(col).css(\"background-color\",\"#4ee534\");}else{if(parseFloat($(col).css(\"opacity\"))==\"0.0\"){$(col).css(\"background-color\",\"black\");$(col).css(\"opacity\",\"1.0\");}else{$(col).css(\"background-color\",\"#ffffff00\");}}}}var button=document.getElementById('change-opacity-button');testActive=!testActive;if(testActive){button.innerText=\"Vanlig vy\";}else{button.innerText=\"Mörklägg vy\";}}return/*#__PURE__*/_jsx(\"div\",{id:\"image-marking\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"main-container\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"header\",children:/*#__PURE__*/_jsx(Navbar,{})}),/*#__PURE__*/_jsxs(\"div\",{className:\"container\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"content\",style:{textAlign:\"center\"},children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h1\",{children:\"Del 1\"}),/*#__PURE__*/_jsx(\"h4\",{children:\"Bildmarkering\"}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"br\",{})]}),/*#__PURE__*/_jsx(\"h5\",{id:\"headline\",children:\"Bild 1 av 5\"}),/*#__PURE__*/_jsx(\"h5\",{id:\"animal\"}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(Button,{id:\"change-opacity-button\",variant:\"outline-secondary\",size:\"sm\",onClick:changeOpacity,style:{marginBottom:\"5px\"},children:\"M\\xF6rkl\\xE4gg vy\"}),/*#__PURE__*/_jsx(\"table\",{id:\"pixel_Table\",style:{float:\"none\"}})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(Button,{id:\"Previous-button-part1\",style:{marginBottom:\"20px\",marginRight:\"20px\",marginLeft:\"20px\",width:\"90px\"},variant:\"outline-secondary\",onClick:PreviousImage,children:\"Tillbaka\"}),/*#__PURE__*/_jsx(Button,{id:\"Next-button-part1\",style:{marginBottom:\"20px\",marginRight:\"20px\",marginLeft:\"20px\",width:\"90px\"},variant:\"outline-secondary\",onClick:NextImage,children:\"N\\xE4sta\"})]}),/*#__PURE__*/_jsxs(\"figure\",{children:[/*#__PURE__*/_jsx(\"img\",{src:colorspectrum,alt:\"Spektrum\"}),/*#__PURE__*/_jsx(\"figcaption\",{children:/*#__PURE__*/_jsx(\"abbr\",{title:\" - H\\xF6gsta graden inneb\\xE4r att den rutan ensam \\xE4r tillr\\xE4ckligt f\\xF6r att identifiera djuret.\\r\\r - Medelgraden inneb\\xE4r att djuret \\xE4r identifierbart med hj\\xE4lp av den rutan, men enbart i kombination med en eller flera av de andra rutorna med samma grad.\\r\\r - L\\xE4gsta graden, en ruta utan markering, indikerar att rutan \\xE4r oviktig f\\xF6r identifiering.\",children:/*#__PURE__*/_jsx(\"h5\",{children:\"Gradskala\"})})})]})]}),/*#__PURE__*/_jsx(Footer,{})]})]})});};export default ImageMarking;","map":{"version":3,"sources":["C:/Users/zantas92/Documents/Enkät/Client/src/pages/protected/survey/ImageMarking.js"],"names":["React","Navbar","Footer","useNavigate","Button","useEffect","$","colorspectrum","Create3DArray","GetImageData","ImageMarking","index","navigate","userData","undefined","testActive","document","getElementById","innerHTML","window","sessionStorage","getItem","setItem","JSON","stringify","parse","createPixelMask","SetImageValues","table","row","i","rows","j","col","cells","css","style","backgroundImage","cell","insertRow","insertCell","addEventListener","IncreaseOpacity","DecreaseOpacity","event","preventDefault","opacity_level","parseFloat","target","NextImage","saveData","Next","imageCount","changeOpacity","PreviousImage","button","innerText","textAlign","marginBottom","float","marginRight","marginLeft","width"],"mappings":"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","sourcesContent":["import React from 'react';\r\nimport '../../../css/App.css';\r\nimport Navbar from '../../../components/Navbar';\r\nimport Footer from '../../../components/Footer';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport Button from 'react-bootstrap/Button';\r\nimport { useEffect } from \"react\";\r\nimport $ from 'jquery';\r\nimport colorspectrum from '../../../images/raw/large/Spectrum.png';\r\nimport Create3DArray from '../../../utils/Create3DArray';\r\nimport GetImageData from '../../../utils/GetImageData';\r\n\r\n\r\nconst ImageMarking = () => {\r\n    let index = 1;\r\n    let navigate = useNavigate();\r\n    var userData = undefined;\r\n    var testActive = false;\r\n\r\n    useEffect(() => {\r\n        document.getElementById(\"animal\").innerHTML =  GetImageData(index-1)[1];\r\n        if(window.sessionStorage.getItem('pixelData') == null) {\r\n            userData = Create3DArray(5,7,7);\r\n            window.sessionStorage.setItem('pixelData', JSON.stringify(userData));\r\n        }\r\n        else {\r\n            userData = JSON.parse(window.sessionStorage.getItem('pixelData'));\r\n        }\r\n        createPixelMask();\r\n        SetImageValues()        \r\n      },[])\r\n    \r\n    function SetImageValues() {\r\n        var table = document.getElementById('pixel_Table')\r\n        var row;\r\n        for (var i = 0, row; row = table.rows[i]; i++) {\r\n            for (var j = 0, col; col = row.cells[j]; j++) {\r\n                if(userData[index-1][i][j] != null) {\r\n                    $(col).css(\"opacity\", userData[index-1][i][j]);\r\n                }\r\n                else {\r\n                    $(col).css(\"opacity\", \"0.0\");\r\n                }\r\n            }\r\n        }\r\n        document.getElementById(\"pixel_Table\").style.backgroundImage = 'url(' + GetImageData(index-1)[0] + ')';\r\n    }\r\n\r\n    function createPixelMask(){\r\n\r\n        var table = document.getElementById(\"pixel_Table\");\r\n        var row;\r\n        var cell;\r\n        for(var i=0;i<7;i++){\r\n            row = table.insertRow(i);\r\n              for(var j=0;j<7;j++){\r\n                cell = row.insertCell(j);\r\n                cell.addEventListener('click', IncreaseOpacity);\r\n                cell.addEventListener('contextmenu', DecreaseOpacity)\r\n            }\r\n        }\r\n    }\r\n    \r\n    function DecreaseOpacity(event) {\r\n        if(!testActive) {\r\n            event.preventDefault()\r\n            var opacity_level = parseFloat($(event.target).css(\"opacity\"));\r\n            if (opacity_level > \"0.25\") {\r\n                opacity_level = opacity_level - 0.50;\r\n                $(event.target).css(\"opacity\", opacity_level);\r\n            }\r\n\t\t\telse if (opacity_level > \"0.0\") {\r\n                opacity_level = opacity_level - 0.25;\r\n                $(event.target).css(\"opacity\", opacity_level);\r\n            }\r\n        }\r\n\t}\r\n\t\t\r\n\tfunction IncreaseOpacity(event) {\r\n        if(!testActive) {\r\n            var opacity_level = parseFloat($(event.target).css(\"opacity\"));\r\n            if (opacity_level < \"0.25\") {\r\n                opacity_level = opacity_level + 0.25;\t\r\n            }\r\n            else if (opacity_level < \"0.75\") {\r\n\t\t\t\topacity_level = opacity_level + 0.50;\r\n\t\t\t}\r\n\t\t\telse {\r\n                opacity_level = 0.0;\r\n            }\r\n            $(event.target).css(\"opacity\", opacity_level);\t\r\n        }\r\n\t}\r\n\r\n    function NextImage() {\r\n        saveData();\r\n        if(index == 5) {\r\n            Next();\r\n        }\r\n        else {     \r\n        index = index + 1;\r\n        var imageCount = index;\r\n        document.getElementById(\"headline\").innerHTML = \"Bild \" + imageCount + \" av 5\";\r\n        document.getElementById(\"animal\").innerHTML =  GetImageData(index-1)[1];\r\n        SetImageValues();\r\n        testActive = true;\r\n        changeOpacity()\r\n        }\r\n    }\r\n\r\n    function PreviousImage() {\r\n        saveData();\r\n        if(index == 1) {\r\n            navigate('/home')\r\n        }\r\n        else {         \r\n            index = index - 1;\r\n            var imageCount = index;\r\n            document.getElementById(\"headline\").innerHTML = \"Bild \" + imageCount + \" av 5\";\r\n            document.getElementById(\"animal\").innerHTML =  GetImageData(index-1)[1];\r\n            SetImageValues();\r\n            testActive = true;\r\n            changeOpacity()\r\n        }\r\n    }\r\n\r\n    function saveData() {\r\n        var table = document.getElementById('pixel_Table')\r\n    \t\tfor (var i = 0, row; row = table.rows[i]; i++) {\r\n        \t\tfor (var j = 0, col; col = row.cells[j]; j++) {\r\n                    if(parseFloat($(col).css(\"opacity\")) == \"1.0\")  {\r\n                        userData[index-1][i][j] = \"0.0\";  \r\n                    }\r\n                    else {\r\n                        userData[index-1][i][j] = $(col).css(\"opacity\");\r\n                    }\r\n                }\r\n            } \r\n        window.sessionStorage.setItem('pixelData', JSON.stringify(userData));         \r\n    }\r\n\r\n    function Next() {\r\n        navigate('/survey/image-ranking')        \r\n    }\r\n\r\n    function changeOpacity() {\r\n        var table = document.getElementById('pixel_Table')\r\n        var row;\r\n        for (var i = 0, row; row = table.rows[i]; i++) {\r\n            for (var j = 0, col; col = row.cells[j]; j++) {\r\n                if(testActive) {\r\n                    if(parseFloat($(col).css(\"opacity\")) == \"1.0\") {                   \r\n                        $(col).css(\"opacity\", \"0.0\");\r\n                    }\r\n\t\t\t\t\t$(col).css(\"background-color\", \"#4ee534\");\r\n                }\r\n                else {\r\n                    if(parseFloat($(col).css(\"opacity\")) == \"0.0\") {\r\n                        $(col).css(\"background-color\", \"black\");\r\n                        $(col).css(\"opacity\", \"1.0\");\r\n\t\t\t\t\t} \r\n\t\t\t\t\telse {\r\n\t\t\t\t\t\t$(col).css(\"background-color\", \"#ffffff00\");\t\t\t\t\t\r\n\t\t\t\t\t}\r\n                }\r\n            }\r\n        }\r\n        var button =  document.getElementById('change-opacity-button');\r\n        testActive = !testActive;\r\n        if(testActive) {\r\n            button.innerText = \"Vanlig vy\";\r\n        }\r\n        else {\r\n            button.innerText = \"Mörklägg vy\";\r\n        }\r\n    }\r\n\r\nreturn (\r\n    <div id=\"image-marking\">\r\n        <div className=\"main-container\">\r\n            <div className=\"header\">\r\n                <Navbar/>\r\n            </div>\r\n            <div className=\"container\">\r\n                <div className=\"content\" style={{textAlign: \"center\"}}>\r\n                <div>\r\n                <h1>Del 1</h1>\r\n                <h4>Bildmarkering</h4>\r\n                <br>\r\n                </br>\r\n                <br>\r\n                </br>\r\n                </div>\r\n                <h5 id=\"headline\">Bild 1 av 5</h5>\r\n                <h5 id=\"animal\"></h5>\r\n                    <div>\r\n                        <Button id=\"change-opacity-button\" variant=\"outline-secondary\" size=\"sm\" onClick={changeOpacity} style={{marginBottom: \"5px\"}}>Mörklägg vy</Button>               \r\n                        <table id=\"pixel_Table\" style={{float: \"none\"}}></table>                           \r\n                    </div>                 \r\n                    <div>\r\n                        <Button id=\"Previous-button-part1\" style={{ marginBottom: \"20px\", marginRight: \"20px\", marginLeft: \"20px\", width: \"90px\"}} variant=\"outline-secondary\" onClick={PreviousImage}>Tillbaka</Button>\r\n                        <Button id=\"Next-button-part1\" style={{ marginBottom: \"20px\", marginRight: \"20px\", marginLeft: \"20px\", width: \"90px\"}} variant=\"outline-secondary\"onClick={NextImage}>Nästa</Button>       \r\n                    </div>\r\n                    <figure>\r\n                    <img src={colorspectrum} alt=\"Spektrum\" />\r\n                        <figcaption><abbr title=\" - Högsta graden innebär att den rutan ensam är tillräckligt för att identifiera djuret.&#013;\r\n                        - Medelgraden innebär att djuret är identifierbart med hjälp av den rutan, men enbart i kombination med en eller flera av de andra rutorna med samma grad.&#013;\r\n                        - Lägsta graden, en ruta utan markering, indikerar att rutan är oviktig för identifiering.\"><h5>Gradskala</h5></abbr></figcaption>\r\n                    </figure>\r\n                </div> \r\n                <Footer/>\r\n            </div>\r\n        </div>\r\n    </div>\r\n    )   \r\n}\r\n\r\n\r\n\r\nexport default ImageMarking;"]},"metadata":{},"sourceType":"module"}