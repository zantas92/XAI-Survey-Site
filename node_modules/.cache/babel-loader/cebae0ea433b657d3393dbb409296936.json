{"ast":null,"code":"var _jsxFileName = \"D:\\\\Kurser\\\\Exjobb\\\\Enk\\xE4t\\\\Release\\\\xai-survey-app\\\\client\\\\src\\\\pages\\\\protected\\\\Survey.js\",\n    _s = $RefreshSig$();\n\nimport React from 'react';\nimport Navbar from '../../components/Navbar';\nimport $ from 'jquery';\nimport { useEffect, useState } from \"react\";\nimport Button from 'react-bootstrap/Button';\nimport '../../css/App.css';\nimport colorspectrum from '../../images/resized/Spectrum.png';\nimport CreateArray from '../../utils/CreateArray';\nimport GetImagePath from '../../utils/GetImagePath';\nimport { useNavigate } from 'react-router-dom';\nimport GetUserId from '../../utils/GetUserId';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst Survey = () => {\n  _s();\n\n  let index = 1;\n  let navigate = useNavigate();\n  var userData = undefined;\n  const userId = GetUserId();\n  useEffect(() => {\n    if (sessionStorage.getItem('data') == null) {\n      console.log(\"Creating new session storage for user data\");\n      userData = CreateArray(5, 8, 8);\n      window.sessionStorage.setItem('data', JSON.stringify(userData));\n    } else {\n      console.log(\"Collecting existing user data from session storage\");\n      userData = JSON.parse(window.sessionStorage.getItem('data'));\n    }\n\n    createPixelMask();\n    SetImageValues();\n  }, []);\n\n  function SetImageValues() {\n    var table = document.getElementById('pixel_Table');\n    var row;\n\n    for (var i = 0, row; row = table.rows[i]; i++) {\n      for (var j = 0, col; col = row.cells[j]; j++) {\n        if (userData[index - 1][i][j] != null) {\n          $(col).css(\"opacity\", userData[index - 1][i][j]);\n        } else {\n          $(col).css(\"opacity\", \"0.0\");\n        }\n      }\n    }\n\n    document.getElementById(\"pixel_Table\").style.backgroundImage = 'url(' + GetImagePath(index - 1) + ')';\n  }\n\n  function createPixelMask() {\n    var table = document.getElementById(\"pixel_Table\");\n    var row;\n    var cell;\n\n    for (var i = 0; i < 8; i++) {\n      row = table.insertRow(i);\n\n      for (var j = 0; j < 8; j++) {\n        cell = row.insertCell(j);\n        cell.addEventListener('click', IncreaseOpacity);\n        cell.addEventListener('contextmenu', DecreaseOpacity);\n      }\n    }\n  }\n\n  function DecreaseOpacity(event) {\n    event.preventDefault();\n    var opacity_level = parseFloat($(event.target).css(\"opacity\"));\n\n    if (opacity_level > \"0.0\") {\n      opacity_level = opacity_level - 0.30;\n      $(event.target).css(\"opacity\", opacity_level);\n    }\n  }\n\n  function IncreaseOpacity(event) {\n    var opacity_level = parseFloat($(event.target).css(\"opacity\"));\n\n    if (opacity_level < \"0.9\") {\n      opacity_level = opacity_level + 0.30;\n      $(event.target).css(\"opacity\", opacity_level);\n    }\n  }\n\n  function NextImage() {\n    saveData();\n\n    if (index == 5) {\n      //TEST\n      submitData();\n    } else {\n      index = index + 1;\n      var imageCount = index;\n      document.getElementById(\"headline\").innerHTML = \"Bild \" + imageCount + \" av 5\";\n\n      if (index == 5) {}\n\n      SetImageValues();\n    }\n  }\n\n  function PreviousImage() {\n    saveData();\n\n    if (index == 1) {\n      navigate('/home');\n    } else {\n      index = index - 1;\n      var imageCount = index;\n      document.getElementById(\"headline\").innerHTML = \"Bild \" + imageCount + \" av 5\";\n\n      if (index < 5) {\n        document.getElementById(\"Next-button\").innerHTML = \"N채sta\";\n      }\n\n      SetImageValues();\n    }\n  }\n\n  function saveData() {\n    var table = document.getElementById('pixel_Table');\n\n    for (var i = 0, row; row = table.rows[i]; i++) {\n      for (var j = 0, col; col = row.cells[j]; j++) {\n        userData[index - 1][i][j] = $(col).css(\"opacity\");\n      }\n    }\n\n    window.sessionStorage.setItem('data', JSON.stringify(userData));\n  }\n\n  function submitData() {\n    const data = {\n      userId: userId,\n      userData: window.sessionStorage.getItem('data')\n    };\n    fetch(\"/submit\", {\n      method: \"POST\",\n      headers: {\n        'Content-type': \"application/json\"\n      },\n      body: JSON.stringify(data)\n    });\n  }\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"survey\",\n    children: [/*#__PURE__*/_jsxDEV(Navbar, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 142,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        height: \"40vw\",\n        position: \"relative\"\n      },\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          position: \"absolute\",\n          top: \"50%\",\n          left: \"50%\",\n          transform: \"translate(-50%, -50%)\",\n          textAlign: \"center\"\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n          id: \"headline\",\n          children: \"Bild 1 av 5\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 145,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(\"table\", {\n          id: \"pixel_Table\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 146,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          children: [/*#__PURE__*/_jsxDEV(Button, {\n            style: {\n              marginBottom: \"20px\",\n              marginRight: \"20px\",\n              marginLeft: \"20px\"\n            },\n            variant: \"outline-secondary\",\n            onClick: PreviousImage,\n            children: \"Tillbaka\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 148,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(Button, {\n            id: \"Next-button\",\n            style: {\n              marginBottom: \"20px\",\n              marginRight: \"20px\",\n              marginLeft: \"20px\"\n            },\n            variant: \"outline-secondary\",\n            onClick: NextImage,\n            children: \"N\\xE4sta\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 149,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 147,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"figure\", {\n          children: [/*#__PURE__*/_jsxDEV(\"img\", {\n            src: colorspectrum,\n            alt: \"Spektrum\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 152,\n            columnNumber: 21\n          }, this), /*#__PURE__*/_jsxDEV(\"figcaption\", {\n            children: /*#__PURE__*/_jsxDEV(\"h5\", {\n              children: \"Gradskala\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 153,\n              columnNumber: 37\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 153,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 151,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 144,\n        columnNumber: 13\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 143,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 141,\n    columnNumber: 5\n  }, this);\n};\n\n_s(Survey, \"0pNeyzXk/ByIxyERsdaIrG6js9s=\", false, function () {\n  return [useNavigate];\n});\n\n_c = Survey;\nexport default Survey;\n\nvar _c;\n\n$RefreshReg$(_c, \"Survey\");","map":{"version":3,"sources":["D:/Kurser/Exjobb/Enk채t/Release/xai-survey-app/client/src/pages/protected/Survey.js"],"names":["React","Navbar","$","useEffect","useState","Button","colorspectrum","CreateArray","GetImagePath","useNavigate","GetUserId","Survey","index","navigate","userData","undefined","userId","sessionStorage","getItem","console","log","window","setItem","JSON","stringify","parse","createPixelMask","SetImageValues","table","document","getElementById","row","i","rows","j","col","cells","css","style","backgroundImage","cell","insertRow","insertCell","addEventListener","IncreaseOpacity","DecreaseOpacity","event","preventDefault","opacity_level","parseFloat","target","NextImage","saveData","submitData","imageCount","innerHTML","PreviousImage","data","fetch","method","headers","body","height","position","top","left","transform","textAlign","marginBottom","marginRight","marginLeft"],"mappings":"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","sourcesContent":["import React from 'react';\r\nimport Navbar from '../../components/Navbar';\r\nimport $ from 'jquery';\r\nimport { useEffect, useState } from \"react\";\r\nimport Button from 'react-bootstrap/Button';\r\nimport '../../css/App.css';\r\nimport colorspectrum from '../../images/resized/Spectrum.png';\r\nimport CreateArray from '../../utils/CreateArray';\r\nimport GetImagePath from '../../utils/GetImagePath';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport GetUserId from '../../utils/GetUserId';\r\n\r\nconst Survey = () => {\r\n    let index = 1;\r\n    let navigate = useNavigate();\r\n    var userData = undefined;\r\n    const userId = GetUserId();\r\n    \r\n\r\n    useEffect(() => {\r\n        if(sessionStorage.getItem('data') == null) {\r\n            console.log(\"Creating new session storage for user data\");\r\n            userData = CreateArray(5,8,8);\r\n            window.sessionStorage.setItem('data', JSON.stringify(userData));\r\n        }\r\n        else {\r\n            console.log(\"Collecting existing user data from session storage\");\r\n            userData = JSON.parse(window.sessionStorage.getItem('data'));\r\n        }\r\n        createPixelMask();\r\n        SetImageValues()        \r\n      },[])\r\n    \r\n    function SetImageValues() {\r\n        var table = document.getElementById('pixel_Table')\r\n        var row;\r\n        for (var i = 0, row; row = table.rows[i]; i++) {\r\n            for (var j = 0, col; col = row.cells[j]; j++) {\r\n                if(userData[index-1][i][j] != null) {\r\n                    $(col).css(\"opacity\", userData[index-1][i][j]);\r\n                }\r\n                else {\r\n                    $(col).css(\"opacity\", \"0.0\");\r\n                }\r\n            }\r\n        }\r\n        document.getElementById(\"pixel_Table\").style.backgroundImage = 'url(' + GetImagePath(index-1) + ')';\r\n    }\r\n\r\n    function createPixelMask(){\r\n\r\n        var table = document.getElementById(\"pixel_Table\");\r\n        var row;\r\n        var cell;\r\n        for(var i=0;i<8;i++){\r\n            row = table.insertRow(i);\r\n              for(var j=0;j<8;j++){\r\n                cell = row.insertCell(j);\r\n                cell.addEventListener('click', IncreaseOpacity);\r\n                cell.addEventListener('contextmenu', DecreaseOpacity)\r\n            }\r\n        }\r\n    }\r\n    \r\n    function DecreaseOpacity(event) {\r\n\t\tevent.preventDefault()\r\n\t\tvar opacity_level = parseFloat($(event.target).css(\"opacity\"));\r\n\t\tif (opacity_level > \"0.0\") {\r\n\t\t\topacity_level = opacity_level - 0.30;\r\n\t\t\t$(event.target).css(\"opacity\", opacity_level);\r\n\t\t}\r\n\t}\r\n\t\t\r\n\tfunction IncreaseOpacity(event) {\r\n\t\tvar opacity_level = parseFloat($(event.target).css(\"opacity\"));\r\n\t\tif (opacity_level < \"0.9\") {\r\n\t\t\topacity_level = opacity_level + 0.30;\r\n\t\t\t$(event.target).css(\"opacity\", opacity_level);\r\n\t\t}\t\r\n\t}\r\n\r\n    function NextImage() {\r\n        saveData();\r\n        if(index == 5) {\r\n            //TEST\r\n            submitData();\r\n        }\r\n        else {     \r\n        index = index + 1;\r\n        var imageCount = index;\r\n        document.getElementById(\"headline\").innerHTML = \"Bild \" + imageCount + \" av 5\";\r\n        if(index == 5) {\r\n            \r\n        }\r\n        SetImageValues();\r\n        }\r\n    }\r\n\r\n    function PreviousImage() {\r\n        saveData();\r\n        if(index == 1) {\r\n            navigate('/home')\r\n        }\r\n        else {         \r\n            index = index - 1;\r\n            var imageCount = index;\r\n            document.getElementById(\"headline\").innerHTML = \"Bild \" + imageCount + \" av 5\";\r\n            if(index < 5) {\r\n                document.getElementById(\"Next-button\").innerHTML = \"N채sta\";\r\n            }\r\n            SetImageValues();\r\n        }\r\n        }\r\n\r\n    function saveData() {\r\n        var table = document.getElementById('pixel_Table')\r\n    \t\tfor (var i = 0, row; row = table.rows[i]; i++) {\r\n        \t\tfor (var j = 0, col; col = row.cells[j]; j++) {\r\n                    userData[index-1][i][j] = $(col).css(\"opacity\");\r\n                }\r\n            } \r\n        window.sessionStorage.setItem('data', JSON.stringify(userData));         \r\n    }\r\n    \r\n    function submitData() {\r\n        const data = {\r\n            userId: userId,\r\n            userData: window.sessionStorage.getItem('data')\r\n        }       \r\n\r\n        fetch(\"/submit\", {\r\n            method: \"POST\",\r\n            headers: {\r\n                'Content-type': \"application/json\"\r\n            },\r\n            body: JSON.stringify(data)\r\n        })\r\n    }     \r\n\r\nreturn (\r\n    <div className=\"survey\">\r\n        <Navbar/>\r\n        <div style={{height: \"40vw\", position: \"relative\"}}>\r\n            <div style={{position: \"absolute\", top: \"50%\", left: \"50%\", transform: \"translate(-50%, -50%)\", textAlign: \"center\"}}>\r\n                <h1 id=\"headline\">Bild 1 av 5</h1>\r\n                    <table id=\"pixel_Table\"></table>\r\n                    <div>\r\n                        <Button style={{ marginBottom: \"20px\", marginRight: \"20px\", marginLeft: \"20px\"}} variant=\"outline-secondary\" onClick={PreviousImage}>Tillbaka</Button>\r\n                        <Button id=\"Next-button\" style={{ marginBottom: \"20px\", marginRight: \"20px\", marginLeft: \"20px\"}} variant=\"outline-secondary\"onClick={NextImage}>N채sta</Button>       \r\n                    </div>\r\n                    <figure>\r\n                    <img src={colorspectrum} alt=\"Spektrum\" />\r\n                        <figcaption><h5>Gradskala</h5></figcaption>\r\n                    </figure>\r\n            </div> \r\n        </div>          \r\n    </div>\r\n    )   \r\n}\r\n\r\n\r\n\r\nexport default Survey;"]},"metadata":{},"sourceType":"module"}