{"ast":null,"code":"import colorspectrum from'../images/resized/Spectrum.png';import Create3DArray from'../utils/Create3DArray';import GetImagePath from'../utils/GetImagePath';import{useNavigate}from'react-router-dom';import GetUserId from'../utils/GetUserId';import $ from'jquery';import{useEffect}from\"react\";import Button from'react-bootstrap/Button';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var SurveyPart1=function SurveyPart1(){var index=1;var navigate=useNavigate();var userData=undefined;var userId=GetUserId();useEffect(function(){if(sessionStorage.getItem('data')==null){userData=Create3DArray(5,8,8);window.sessionStorage.setItem('data',JSON.stringify(userData));}else{userData=JSON.parse(window.sessionStorage.getItem('data'));}createPixelMask();SetImageValues();},[]);function SetImageValues(){var table=document.getElementById('pixel_Table');var row;for(var i=0,row;row=table.rows[i];i++){for(var j=0,col;col=row.cells[j];j++){if(userData[index-1][i][j]!=null){$(col).css(\"opacity\",userData[index-1][i][j]);}else{$(col).css(\"opacity\",\"0.0\");}}}document.getElementById(\"pixel_Table\").style.backgroundImage='url('+GetImagePath(index-1)+')';}function createPixelMask(){var table=document.getElementById(\"pixel_Table\");var row;var cell;for(var i=0;i<8;i++){row=table.insertRow(i);for(var j=0;j<8;j++){cell=row.insertCell(j);cell.addEventListener('click',IncreaseOpacity);cell.addEventListener('contextmenu',DecreaseOpacity);}}}function DecreaseOpacity(event){event.preventDefault();var opacity_level=parseFloat($(event.target).css(\"opacity\"));if(opacity_level>\"0.0\"){opacity_level=opacity_level-0.30;$(event.target).css(\"opacity\",opacity_level);}}function IncreaseOpacity(event){var opacity_level=parseFloat($(event.target).css(\"opacity\"));if(opacity_level<\"0.9\"){opacity_level=opacity_level+0.30;$(event.target).css(\"opacity\",opacity_level);}}function NextImage(){saveData();console.log(document.getElementById(\"Previous-button\").style.width);if(index==5){document.getElementById(\"SurveyPart1\").style.display=\"none\";document.getElementById(\"SurveyPart3\").style.display=\"inline\";submitData();}else{index=index+1;var imageCount=index;document.getElementById(\"headline\").innerHTML=\"Bild \"+imageCount+\" av 5\";if(index==5){document.getElementById(\"Next-button\").innerHTML=\"Färdig\";}SetImageValues();}}function PreviousImage(){saveData();if(index==1){navigate('/home');}else{index=index-1;var imageCount=index;document.getElementById(\"headline\").innerHTML=\"Bild \"+imageCount+\" av 5\";if(index<5){document.getElementById(\"Next-button\").innerHTML=\"Nästa\";}SetImageValues();}}function saveData(){var table=document.getElementById('pixel_Table');for(var i=0,row;row=table.rows[i];i++){for(var j=0,col;col=row.cells[j];j++){userData[index-1][i][j]=$(col).css(\"opacity\");}}window.sessionStorage.setItem('data',JSON.stringify(userData));}function submitData(){var data={userId:userId,userData:window.sessionStorage.getItem('data')};fetch(\"https://stormy-plains-42247.herokuapp.com/submit\",{mode:\"cors\",method:\"POST\",headers:{'Content-type':\"application/json\"},body:JSON.stringify(data)}).then(function(response){return response.json();});}return/*#__PURE__*/_jsxs(\"div\",{id:\"SurveyPart1\",children:[/*#__PURE__*/_jsx(\"h1\",{id:\"headline\",children:\"Bild 1 av 5\"}),/*#__PURE__*/_jsx(\"table\",{id:\"pixel_Table\"}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(Button,{id:\"Previous-button\",style:{marginBottom:\"20px\",marginRight:\"20px\",marginLeft:\"20px\"},variant:\"outline-secondary\",onClick:PreviousImage,children:\"Tillbaka\"}),/*#__PURE__*/_jsx(Button,{id:\"Next-button\",style:{marginBottom:\"20px\",marginRight:\"20px\",marginLeft:\"20px\"},variant:\"outline-secondary\",onClick:NextImage,children:\"N\\xE4sta\"})]}),/*#__PURE__*/_jsxs(\"figure\",{children:[/*#__PURE__*/_jsx(\"img\",{src:colorspectrum,alt:\"Spektrum\"}),/*#__PURE__*/_jsx(\"figcaption\",{children:/*#__PURE__*/_jsx(\"h5\",{children:\"Gradskala\"})})]})]});};export default SurveyPart1;","map":{"version":3,"sources":["C:/Users/zantas92/Documents/Enkät/Client/src/components/SurveyPart1.js"],"names":["colorspectrum","Create3DArray","GetImagePath","useNavigate","GetUserId","$","useEffect","Button","SurveyPart1","index","navigate","userData","undefined","userId","sessionStorage","getItem","window","setItem","JSON","stringify","parse","createPixelMask","SetImageValues","table","document","getElementById","row","i","rows","j","col","cells","css","style","backgroundImage","cell","insertRow","insertCell","addEventListener","IncreaseOpacity","DecreaseOpacity","event","preventDefault","opacity_level","parseFloat","target","NextImage","saveData","console","log","width","display","submitData","imageCount","innerHTML","PreviousImage","data","fetch","mode","method","headers","body","then","response","json","marginBottom","marginRight","marginLeft"],"mappings":"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","sourcesContent":["import colorspectrum from '../images/resized/Spectrum.png';\r\nimport Create3DArray from '../utils/Create3DArray';\r\nimport GetImagePath from '../utils/GetImagePath';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport GetUserId from '../utils/GetUserId';\r\nimport $ from 'jquery';\r\nimport { useEffect } from \"react\";\r\nimport Button from 'react-bootstrap/Button';\r\n\r\nconst SurveyPart1 = () => {\r\n    let index = 1;\r\n    let navigate = useNavigate();\r\n    var userData = undefined;\r\n    const userId = GetUserId();\r\n    \r\n\r\n    useEffect(() => {\r\n        if(sessionStorage.getItem('data') == null) {\r\n            userData = Create3DArray(5,8,8);\r\n            window.sessionStorage.setItem('data', JSON.stringify(userData));\r\n        }\r\n        else {\r\n            userData = JSON.parse(window.sessionStorage.getItem('data'));\r\n        }\r\n        createPixelMask();\r\n        SetImageValues()        \r\n      },[])\r\n    \r\n    function SetImageValues() {\r\n        var table = document.getElementById('pixel_Table')\r\n        var row;\r\n        for (var i = 0, row; row = table.rows[i]; i++) {\r\n            for (var j = 0, col; col = row.cells[j]; j++) {\r\n                if(userData[index-1][i][j] != null) {\r\n                    $(col).css(\"opacity\", userData[index-1][i][j]);\r\n                }\r\n                else {\r\n                    $(col).css(\"opacity\", \"0.0\");\r\n                }\r\n            }\r\n        }\r\n        document.getElementById(\"pixel_Table\").style.backgroundImage = 'url(' + GetImagePath(index-1) + ')';\r\n    }\r\n\r\n    function createPixelMask(){\r\n\r\n        var table = document.getElementById(\"pixel_Table\");\r\n        var row;\r\n        var cell;\r\n        for(var i=0;i<8;i++){\r\n            row = table.insertRow(i);\r\n              for(var j=0;j<8;j++){\r\n                cell = row.insertCell(j);\r\n                cell.addEventListener('click', IncreaseOpacity);\r\n                cell.addEventListener('contextmenu', DecreaseOpacity)\r\n            }\r\n        }\r\n    }\r\n    \r\n    function DecreaseOpacity(event) {\r\n\t\tevent.preventDefault()\r\n\t\tvar opacity_level = parseFloat($(event.target).css(\"opacity\"));\r\n\t\tif (opacity_level > \"0.0\") {\r\n\t\t\topacity_level = opacity_level - 0.30;\r\n\t\t\t$(event.target).css(\"opacity\", opacity_level);\r\n\t\t}\r\n\t}\r\n\t\t\r\n\tfunction IncreaseOpacity(event) {\r\n\t\tvar opacity_level = parseFloat($(event.target).css(\"opacity\"));\r\n\t\tif (opacity_level < \"0.9\") {\r\n\t\t\topacity_level = opacity_level + 0.30;\r\n\t\t\t$(event.target).css(\"opacity\", opacity_level);\r\n\t\t}\t\r\n\t}\r\n\r\n    function NextImage() {\r\n        saveData();\r\n        console.log(document.getElementById(\"Previous-button\").style.width);\r\n        if(index == 5) {\r\n            document.getElementById(\"SurveyPart1\").style.display = \"none\";\r\n            document.getElementById(\"SurveyPart3\").style.display = \"inline\";\r\n            submitData();\r\n        }\r\n        else {     \r\n        index = index + 1;\r\n        var imageCount = index;\r\n        document.getElementById(\"headline\").innerHTML = \"Bild \" + imageCount + \" av 5\";\r\n        if(index == 5) {\r\n            document.getElementById(\"Next-button\").innerHTML = \"Färdig\";\r\n        }\r\n        SetImageValues();\r\n        }\r\n    }\r\n\r\n    function PreviousImage() {\r\n        saveData();\r\n        if(index == 1) {\r\n            navigate('/home')\r\n        }\r\n        else {         \r\n            index = index - 1;\r\n            var imageCount = index;\r\n            document.getElementById(\"headline\").innerHTML = \"Bild \" + imageCount + \" av 5\";\r\n            if(index < 5) {\r\n                document.getElementById(\"Next-button\").innerHTML = \"Nästa\";\r\n            }\r\n            SetImageValues();\r\n        }\r\n        }\r\n\r\n    function saveData() {\r\n        var table = document.getElementById('pixel_Table')\r\n    \t\tfor (var i = 0, row; row = table.rows[i]; i++) {\r\n        \t\tfor (var j = 0, col; col = row.cells[j]; j++) {\r\n                    userData[index-1][i][j] = $(col).css(\"opacity\");\r\n                }\r\n            } \r\n        window.sessionStorage.setItem('data', JSON.stringify(userData));         \r\n    }\r\n\r\n    function submitData() {\r\n        const data = {\r\n            userId: userId,\r\n            userData: window.sessionStorage.getItem('data')\r\n        }       \r\n\r\n        fetch(\"https://stormy-plains-42247.herokuapp.com/submit\", {\r\n            mode: \"cors\",\r\n            method: \"POST\",\r\n            headers: {\r\n                'Content-type': \"application/json\"\r\n            },\r\n            body: JSON.stringify(data)\r\n        }).then(function(response) {\r\n            return response.json();\r\n        });\r\n    }\r\n\r\n\r\n    return (\r\n        <div id=\"SurveyPart1\">\r\n            <h1 id=\"headline\">Bild 1 av 5</h1>\r\n                    <table id=\"pixel_Table\"></table>\r\n                    <div>\r\n                        <Button id=\"Previous-button\" style={{ marginBottom: \"20px\", marginRight: \"20px\", marginLeft: \"20px\"}} variant=\"outline-secondary\" onClick={PreviousImage}>Tillbaka</Button>\r\n                        <Button id=\"Next-button\" style={{ marginBottom: \"20px\", marginRight: \"20px\", marginLeft: \"20px\"}} variant=\"outline-secondary\"onClick={NextImage}>Nästa</Button>       \r\n                    </div>\r\n                    <figure>\r\n                    <img src={colorspectrum} alt=\"Spektrum\" />\r\n                        <figcaption><h5>Gradskala</h5></figcaption>\r\n                    </figure>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default SurveyPart1;"]},"metadata":{},"sourceType":"module"}