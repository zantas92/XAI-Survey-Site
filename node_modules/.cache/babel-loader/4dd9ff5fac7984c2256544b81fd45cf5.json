{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\zantas92\\\\Documents\\\\Enk\\xE4t\\\\Client\\\\src\\\\pages\\\\protected\\\\survey\\\\ImageMarking.js\",\n    _s = $RefreshSig$();\n\nimport React from 'react';\nimport '../../../css/App.css';\nimport Navbar from '../../../components/Navbar';\nimport Footer from '../../../components/Footer';\nimport { useNavigate } from 'react-router-dom';\nimport Button from 'react-bootstrap/Button';\nimport { useEffect } from \"react\";\nimport $ from 'jquery';\nimport colorspectrum from '../../../images/raw/large/Spectrum.png';\nimport Create3DArray from '../../../utils/Create3DArray';\nimport GetImageData from '../../../utils/GetImageData';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst ImageMarking = () => {\n  _s();\n\n  let index = 1;\n  let navigate = useNavigate();\n  var userData = undefined;\n  var testActive = false;\n  useEffect(() => {\n    document.getElementById(\"animal\").innerHTML = GetImageData(index - 1)[1];\n\n    if (window.sessionStorage.getItem('pixelData') == null) {\n      userData = Create3DArray(5, 7, 7);\n      window.sessionStorage.setItem('pixelData', JSON.stringify(userData));\n    } else {\n      userData = JSON.parse(window.sessionStorage.getItem('pixelData'));\n    }\n\n    createPixelMask();\n    SetImageValues();\n  }, []);\n\n  function SetImageValues() {\n    var table = document.getElementById('pixel_Table');\n    var row;\n\n    for (var i = 0, row; row = table.rows[i]; i++) {\n      for (var j = 0, col; col = row.cells[j]; j++) {\n        if (userData[index - 1][i][j] != null) {\n          $(col).css(\"opacity\", userData[index - 1][i][j]);\n        } else {\n          $(col).css(\"opacity\", \"0.0\");\n        }\n      }\n    }\n\n    document.getElementById(\"pixel_Table\").style.backgroundImage = 'url(' + GetImageData(index - 1)[0] + ')';\n  }\n\n  function createPixelMask() {\n    var table = document.getElementById(\"pixel_Table\");\n    var row;\n    var cell;\n\n    for (var i = 0; i < 7; i++) {\n      row = table.insertRow(i);\n\n      for (var j = 0; j < 7; j++) {\n        cell = row.insertCell(j);\n        cell.addEventListener('click', IncreaseOpacity);\n        cell.addEventListener('contextmenu', DecreaseOpacity);\n      }\n    }\n  }\n\n  function DecreaseOpacity(event) {\n    if (!testActive) {\n      event.preventDefault();\n      var opacity_level = parseFloat($(event.target).css(\"opacity\"));\n\n      if (opacity_level > \"0.25\") {\n        opacity_level = opacity_level - 0.50;\n        $(event.target).css(\"opacity\", opacity_level);\n      } else if (opacity_level > \"0.0\") {\n        opacity_level = opacity_level - 0.25;\n        $(event.target).css(\"opacity\", opacity_level);\n      }\n    }\n  }\n\n  function IncreaseOpacity(event) {\n    if (!testActive) {\n      var opacity_level = parseFloat($(event.target).css(\"opacity\"));\n\n      if (opacity_level < \"0.25\") {\n        opacity_level = opacity_level + 0.25;\n      } else if (opacity_level < \"0.75\") {\n        opacity_level = opacity_level + 0.50;\n      } else {\n        opacity_level = 0.0;\n      }\n\n      $(event.target).css(\"opacity\", opacity_level);\n    }\n  }\n\n  function NextImage() {\n    saveData();\n\n    if (index == 5) {\n      Next();\n    } else {\n      index = index + 1;\n      var imageCount = index;\n      document.getElementById(\"headline\").innerHTML = \"Bild \" + imageCount + \" av 5\";\n      document.getElementById(\"animal\").innerHTML = GetImageData(index - 1)[1];\n      SetImageValues();\n      testActive = true;\n      changeOpacity();\n    }\n  }\n\n  function PreviousImage() {\n    saveData();\n\n    if (index == 1) {\n      navigate('/home');\n    } else {\n      index = index - 1;\n      var imageCount = index;\n      document.getElementById(\"headline\").innerHTML = \"Bild \" + imageCount + \" av 5\";\n      document.getElementById(\"animal\").innerHTML = GetImageData(index - 1)[1];\n      SetImageValues();\n      testActive = true;\n      changeOpacity();\n    }\n  }\n\n  function saveData() {\n    var table = document.getElementById('pixel_Table');\n\n    for (var i = 0, row; row = table.rows[i]; i++) {\n      for (var j = 0, col; col = row.cells[j]; j++) {\n        if (parseFloat($(col).css(\"opacity\")) == \"1.0\") {\n          userData[index - 1][i][j] = \"0.0\";\n        } else {\n          userData[index - 1][i][j] = $(col).css(\"opacity\");\n        }\n      }\n    }\n\n    window.sessionStorage.setItem('pixelData', JSON.stringify(userData));\n  }\n\n  function Next() {\n    navigate('/survey/image-ranking');\n  }\n\n  function changeOpacity() {\n    var table = document.getElementById('pixel_Table');\n    var row;\n\n    for (var i = 0, row; row = table.rows[i]; i++) {\n      for (var j = 0, col; col = row.cells[j]; j++) {\n        if (testActive) {\n          if (parseFloat($(col).css(\"opacity\")) == \"1.0\") {\n            $(col).css(\"opacity\", \"0.0\");\n          }\n\n          $(col).css(\"background-color\", \"#4ee534\");\n        } else {\n          if (parseFloat($(col).css(\"opacity\")) == \"0.0\") {\n            $(col).css(\"background-color\", \"black\");\n            $(col).css(\"opacity\", \"1.0\");\n          } else {\n            $(col).css(\"background-color\", \"#ffffff00\");\n          }\n        }\n      }\n    }\n\n    var button = document.getElementById('change-opacity-button');\n    testActive = !testActive;\n\n    if (testActive) {\n      button.innerText = \"Vanlig vy\";\n    } else {\n      button.innerText = \"Mörklägg vy\";\n    }\n  }\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    id: \"image-marking\",\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"main-container\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"header\",\n        children: /*#__PURE__*/_jsxDEV(Navbar, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 182,\n          columnNumber: 17\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 181,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"container\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"content\",\n          style: {\n            textAlign: \"center\"\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n              children: \"Del 1\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 187,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"h4\", {\n              children: \"Bildmarkering\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 188,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 189,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 191,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 186,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"h5\", {\n            id: \"headline\",\n            children: \"Bild 1 av 5\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 194,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"h5\", {\n            id: \"animal\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 195,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            children: [/*#__PURE__*/_jsxDEV(Button, {\n              id: \"change-opacity-button\",\n              variant: \"outline-secondary\",\n              size: \"sm\",\n              onClick: changeOpacity,\n              style: {\n                marginBottom: \"5px\"\n              },\n              children: \"M\\xF6rkl\\xE4gg vy\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 197,\n              columnNumber: 25\n            }, this), /*#__PURE__*/_jsxDEV(\"table\", {\n              id: \"pixel_Table\",\n              style: {\n                float: \"none\"\n              }\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 198,\n              columnNumber: 25\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 196,\n            columnNumber: 21\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            children: [/*#__PURE__*/_jsxDEV(Button, {\n              id: \"Previous-button-part1\",\n              style: {\n                marginBottom: \"20px\",\n                marginRight: \"20px\",\n                marginLeft: \"20px\",\n                width: \"90px\"\n              },\n              variant: \"outline-secondary\",\n              onClick: PreviousImage,\n              children: \"Tillbaka\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 201,\n              columnNumber: 25\n            }, this), /*#__PURE__*/_jsxDEV(Button, {\n              id: \"Next-button-part1\",\n              style: {\n                marginBottom: \"20px\",\n                marginRight: \"20px\",\n                marginLeft: \"20px\",\n                width: \"90px\"\n              },\n              variant: \"outline-secondary\",\n              onClick: NextImage,\n              children: \"N\\xE4sta\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 202,\n              columnNumber: 25\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 200,\n            columnNumber: 21\n          }, this), /*#__PURE__*/_jsxDEV(\"figure\", {\n            children: [/*#__PURE__*/_jsxDEV(\"img\", {\n              src: colorspectrum,\n              alt: \"Spektrum\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 205,\n              columnNumber: 21\n            }, this), /*#__PURE__*/_jsxDEV(\"figcaption\", {\n              children: /*#__PURE__*/_jsxDEV(\"abbr\", {\n                title: \"H\\xF6gsta graden inneb\\xE4r att den rutan ensam \\xE4r tillr\\xE4ckligt f\\xF6r att identifiera djuret.\\\\n\\r Medelgraden inneb\\xE4r att djuret \\xE4r identifierbart med hj\\xE4lp av den rutan, men enbart i kombination med en eller flera av de andra rutorna med samma grad.\\\\n\\r L\\xE4gsta graden, en ruta utan markering, indikerar att rutan \\xE4r oviktig f\\xF6r identifiering.\",\n                children: /*#__PURE__*/_jsxDEV(\"h5\", {\n                  children: \"Gradskala\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 208,\n                  columnNumber: 115\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 206,\n                columnNumber: 37\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 206,\n              columnNumber: 25\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 204,\n            columnNumber: 21\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 185,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(Footer, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 211,\n          columnNumber: 17\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 184,\n        columnNumber: 13\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 180,\n      columnNumber: 9\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 179,\n    columnNumber: 5\n  }, this);\n};\n\n_s(ImageMarking, \"0pNeyzXk/ByIxyERsdaIrG6js9s=\", false, function () {\n  return [useNavigate];\n});\n\n_c = ImageMarking;\nexport default ImageMarking;\n\nvar _c;\n\n$RefreshReg$(_c, \"ImageMarking\");","map":{"version":3,"sources":["C:/Users/zantas92/Documents/Enkät/Client/src/pages/protected/survey/ImageMarking.js"],"names":["React","Navbar","Footer","useNavigate","Button","useEffect","$","colorspectrum","Create3DArray","GetImageData","ImageMarking","index","navigate","userData","undefined","testActive","document","getElementById","innerHTML","window","sessionStorage","getItem","setItem","JSON","stringify","parse","createPixelMask","SetImageValues","table","row","i","rows","j","col","cells","css","style","backgroundImage","cell","insertRow","insertCell","addEventListener","IncreaseOpacity","DecreaseOpacity","event","preventDefault","opacity_level","parseFloat","target","NextImage","saveData","Next","imageCount","changeOpacity","PreviousImage","button","innerText","textAlign","marginBottom","float","marginRight","marginLeft","width"],"mappings":";;;AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,OAAO,sBAAP;AACA,OAAOC,MAAP,MAAmB,4BAAnB;AACA,OAAOC,MAAP,MAAmB,4BAAnB;AACA,SAASC,WAAT,QAA4B,kBAA5B;AACA,OAAOC,MAAP,MAAmB,wBAAnB;AACA,SAASC,SAAT,QAA0B,OAA1B;AACA,OAAOC,CAAP,MAAc,QAAd;AACA,OAAOC,aAAP,MAA0B,wCAA1B;AACA,OAAOC,aAAP,MAA0B,8BAA1B;AACA,OAAOC,YAAP,MAAyB,6BAAzB;;;AAGA,MAAMC,YAAY,GAAG,MAAM;AAAA;;AACvB,MAAIC,KAAK,GAAG,CAAZ;AACA,MAAIC,QAAQ,GAAGT,WAAW,EAA1B;AACA,MAAIU,QAAQ,GAAGC,SAAf;AACA,MAAIC,UAAU,GAAG,KAAjB;AAEAV,EAAAA,SAAS,CAAC,MAAM;AACZW,IAAAA,QAAQ,CAACC,cAAT,CAAwB,QAAxB,EAAkCC,SAAlC,GAA+CT,YAAY,CAACE,KAAK,GAAC,CAAP,CAAZ,CAAsB,CAAtB,CAA/C;;AACA,QAAGQ,MAAM,CAACC,cAAP,CAAsBC,OAAtB,CAA8B,WAA9B,KAA8C,IAAjD,EAAuD;AACnDR,MAAAA,QAAQ,GAAGL,aAAa,CAAC,CAAD,EAAG,CAAH,EAAK,CAAL,CAAxB;AACAW,MAAAA,MAAM,CAACC,cAAP,CAAsBE,OAAtB,CAA8B,WAA9B,EAA2CC,IAAI,CAACC,SAAL,CAAeX,QAAf,CAA3C;AACH,KAHD,MAIK;AACDA,MAAAA,QAAQ,GAAGU,IAAI,CAACE,KAAL,CAAWN,MAAM,CAACC,cAAP,CAAsBC,OAAtB,CAA8B,WAA9B,CAAX,CAAX;AACH;;AACDK,IAAAA,eAAe;AACfC,IAAAA,cAAc;AACf,GAXM,EAWL,EAXK,CAAT;;AAaA,WAASA,cAAT,GAA0B;AACtB,QAAIC,KAAK,GAAGZ,QAAQ,CAACC,cAAT,CAAwB,aAAxB,CAAZ;AACA,QAAIY,GAAJ;;AACA,SAAK,IAAIC,CAAC,GAAG,CAAR,EAAWD,GAAhB,EAAqBA,GAAG,GAAGD,KAAK,CAACG,IAAN,CAAWD,CAAX,CAA3B,EAA0CA,CAAC,EAA3C,EAA+C;AAC3C,WAAK,IAAIE,CAAC,GAAG,CAAR,EAAWC,GAAhB,EAAqBA,GAAG,GAAGJ,GAAG,CAACK,KAAJ,CAAUF,CAAV,CAA3B,EAAyCA,CAAC,EAA1C,EAA8C;AAC1C,YAAGnB,QAAQ,CAACF,KAAK,GAAC,CAAP,CAAR,CAAkBmB,CAAlB,EAAqBE,CAArB,KAA2B,IAA9B,EAAoC;AAChC1B,UAAAA,CAAC,CAAC2B,GAAD,CAAD,CAAOE,GAAP,CAAW,SAAX,EAAsBtB,QAAQ,CAACF,KAAK,GAAC,CAAP,CAAR,CAAkBmB,CAAlB,EAAqBE,CAArB,CAAtB;AACH,SAFD,MAGK;AACD1B,UAAAA,CAAC,CAAC2B,GAAD,CAAD,CAAOE,GAAP,CAAW,SAAX,EAAsB,KAAtB;AACH;AACJ;AACJ;;AACDnB,IAAAA,QAAQ,CAACC,cAAT,CAAwB,aAAxB,EAAuCmB,KAAvC,CAA6CC,eAA7C,GAA+D,SAAS5B,YAAY,CAACE,KAAK,GAAC,CAAP,CAAZ,CAAsB,CAAtB,CAAT,GAAoC,GAAnG;AACH;;AAED,WAASe,eAAT,GAA0B;AAEtB,QAAIE,KAAK,GAAGZ,QAAQ,CAACC,cAAT,CAAwB,aAAxB,CAAZ;AACA,QAAIY,GAAJ;AACA,QAAIS,IAAJ;;AACA,SAAI,IAAIR,CAAC,GAAC,CAAV,EAAYA,CAAC,GAAC,CAAd,EAAgBA,CAAC,EAAjB,EAAoB;AAChBD,MAAAA,GAAG,GAAGD,KAAK,CAACW,SAAN,CAAgBT,CAAhB,CAAN;;AACE,WAAI,IAAIE,CAAC,GAAC,CAAV,EAAYA,CAAC,GAAC,CAAd,EAAgBA,CAAC,EAAjB,EAAoB;AAClBM,QAAAA,IAAI,GAAGT,GAAG,CAACW,UAAJ,CAAeR,CAAf,CAAP;AACAM,QAAAA,IAAI,CAACG,gBAAL,CAAsB,OAAtB,EAA+BC,eAA/B;AACAJ,QAAAA,IAAI,CAACG,gBAAL,CAAsB,aAAtB,EAAqCE,eAArC;AACH;AACJ;AACJ;;AAED,WAASA,eAAT,CAAyBC,KAAzB,EAAgC;AAC5B,QAAG,CAAC7B,UAAJ,EAAgB;AACZ6B,MAAAA,KAAK,CAACC,cAAN;AACA,UAAIC,aAAa,GAAGC,UAAU,CAACzC,CAAC,CAACsC,KAAK,CAACI,MAAP,CAAD,CAAgBb,GAAhB,CAAoB,SAApB,CAAD,CAA9B;;AACA,UAAIW,aAAa,GAAG,MAApB,EAA4B;AACxBA,QAAAA,aAAa,GAAGA,aAAa,GAAG,IAAhC;AACAxC,QAAAA,CAAC,CAACsC,KAAK,CAACI,MAAP,CAAD,CAAgBb,GAAhB,CAAoB,SAApB,EAA+BW,aAA/B;AACH,OAHD,MAIJ,IAAIA,aAAa,GAAG,KAApB,EAA2B;AACnBA,QAAAA,aAAa,GAAGA,aAAa,GAAG,IAAhC;AACAxC,QAAAA,CAAC,CAACsC,KAAK,CAACI,MAAP,CAAD,CAAgBb,GAAhB,CAAoB,SAApB,EAA+BW,aAA/B;AACH;AACJ;AACP;;AAED,WAASJ,eAAT,CAAyBE,KAAzB,EAAgC;AACzB,QAAG,CAAC7B,UAAJ,EAAgB;AACZ,UAAI+B,aAAa,GAAGC,UAAU,CAACzC,CAAC,CAACsC,KAAK,CAACI,MAAP,CAAD,CAAgBb,GAAhB,CAAoB,SAApB,CAAD,CAA9B;;AACA,UAAIW,aAAa,GAAG,MAApB,EAA4B;AACxBA,QAAAA,aAAa,GAAGA,aAAa,GAAG,IAAhC;AACH,OAFD,MAGK,IAAIA,aAAa,GAAG,MAApB,EAA4B;AACzCA,QAAAA,aAAa,GAAGA,aAAa,GAAG,IAAhC;AACA,OAFa,MAGT;AACQA,QAAAA,aAAa,GAAG,GAAhB;AACH;;AACDxC,MAAAA,CAAC,CAACsC,KAAK,CAACI,MAAP,CAAD,CAAgBb,GAAhB,CAAoB,SAApB,EAA+BW,aAA/B;AACH;AACP;;AAEE,WAASG,SAAT,GAAqB;AACjBC,IAAAA,QAAQ;;AACR,QAAGvC,KAAK,IAAI,CAAZ,EAAe;AACXwC,MAAAA,IAAI;AACP,KAFD,MAGK;AACLxC,MAAAA,KAAK,GAAGA,KAAK,GAAG,CAAhB;AACA,UAAIyC,UAAU,GAAGzC,KAAjB;AACAK,MAAAA,QAAQ,CAACC,cAAT,CAAwB,UAAxB,EAAoCC,SAApC,GAAgD,UAAUkC,UAAV,GAAuB,OAAvE;AACApC,MAAAA,QAAQ,CAACC,cAAT,CAAwB,QAAxB,EAAkCC,SAAlC,GAA+CT,YAAY,CAACE,KAAK,GAAC,CAAP,CAAZ,CAAsB,CAAtB,CAA/C;AACAgB,MAAAA,cAAc;AACdZ,MAAAA,UAAU,GAAG,IAAb;AACAsC,MAAAA,aAAa;AACZ;AACJ;;AAED,WAASC,aAAT,GAAyB;AACrBJ,IAAAA,QAAQ;;AACR,QAAGvC,KAAK,IAAI,CAAZ,EAAe;AACXC,MAAAA,QAAQ,CAAC,OAAD,CAAR;AACH,KAFD,MAGK;AACDD,MAAAA,KAAK,GAAGA,KAAK,GAAG,CAAhB;AACA,UAAIyC,UAAU,GAAGzC,KAAjB;AACAK,MAAAA,QAAQ,CAACC,cAAT,CAAwB,UAAxB,EAAoCC,SAApC,GAAgD,UAAUkC,UAAV,GAAuB,OAAvE;AACApC,MAAAA,QAAQ,CAACC,cAAT,CAAwB,QAAxB,EAAkCC,SAAlC,GAA+CT,YAAY,CAACE,KAAK,GAAC,CAAP,CAAZ,CAAsB,CAAtB,CAA/C;AACAgB,MAAAA,cAAc;AACdZ,MAAAA,UAAU,GAAG,IAAb;AACAsC,MAAAA,aAAa;AAChB;AACJ;;AAED,WAASH,QAAT,GAAoB;AAChB,QAAItB,KAAK,GAAGZ,QAAQ,CAACC,cAAT,CAAwB,aAAxB,CAAZ;;AACF,SAAK,IAAIa,CAAC,GAAG,CAAR,EAAWD,GAAhB,EAAqBA,GAAG,GAAGD,KAAK,CAACG,IAAN,CAAWD,CAAX,CAA3B,EAA0CA,CAAC,EAA3C,EAA+C;AAC3C,WAAK,IAAIE,CAAC,GAAG,CAAR,EAAWC,GAAhB,EAAqBA,GAAG,GAAGJ,GAAG,CAACK,KAAJ,CAAUF,CAAV,CAA3B,EAAyCA,CAAC,EAA1C,EAA8C;AACpC,YAAGe,UAAU,CAACzC,CAAC,CAAC2B,GAAD,CAAD,CAAOE,GAAP,CAAW,SAAX,CAAD,CAAV,IAAqC,KAAxC,EAAgD;AAC5CtB,UAAAA,QAAQ,CAACF,KAAK,GAAC,CAAP,CAAR,CAAkBmB,CAAlB,EAAqBE,CAArB,IAA0B,KAA1B;AACH,SAFD,MAGK;AACDnB,UAAAA,QAAQ,CAACF,KAAK,GAAC,CAAP,CAAR,CAAkBmB,CAAlB,EAAqBE,CAArB,IAA0B1B,CAAC,CAAC2B,GAAD,CAAD,CAAOE,GAAP,CAAW,SAAX,CAA1B;AACH;AACJ;AACJ;;AACLhB,IAAAA,MAAM,CAACC,cAAP,CAAsBE,OAAtB,CAA8B,WAA9B,EAA2CC,IAAI,CAACC,SAAL,CAAeX,QAAf,CAA3C;AACH;;AAED,WAASsC,IAAT,GAAgB;AACZvC,IAAAA,QAAQ,CAAC,uBAAD,CAAR;AACH;;AAED,WAASyC,aAAT,GAAyB;AACrB,QAAIzB,KAAK,GAAGZ,QAAQ,CAACC,cAAT,CAAwB,aAAxB,CAAZ;AACA,QAAIY,GAAJ;;AACA,SAAK,IAAIC,CAAC,GAAG,CAAR,EAAWD,GAAhB,EAAqBA,GAAG,GAAGD,KAAK,CAACG,IAAN,CAAWD,CAAX,CAA3B,EAA0CA,CAAC,EAA3C,EAA+C;AAC3C,WAAK,IAAIE,CAAC,GAAG,CAAR,EAAWC,GAAhB,EAAqBA,GAAG,GAAGJ,GAAG,CAACK,KAAJ,CAAUF,CAAV,CAA3B,EAAyCA,CAAC,EAA1C,EAA8C;AAC1C,YAAGjB,UAAH,EAAe;AACX,cAAGgC,UAAU,CAACzC,CAAC,CAAC2B,GAAD,CAAD,CAAOE,GAAP,CAAW,SAAX,CAAD,CAAV,IAAqC,KAAxC,EAA+C;AAC3C7B,YAAAA,CAAC,CAAC2B,GAAD,CAAD,CAAOE,GAAP,CAAW,SAAX,EAAsB,KAAtB;AACH;;AAChB7B,UAAAA,CAAC,CAAC2B,GAAD,CAAD,CAAOE,GAAP,CAAW,kBAAX,EAA+B,SAA/B;AACY,SALD,MAMK;AACD,cAAGY,UAAU,CAACzC,CAAC,CAAC2B,GAAD,CAAD,CAAOE,GAAP,CAAW,SAAX,CAAD,CAAV,IAAqC,KAAxC,EAA+C;AAC3C7B,YAAAA,CAAC,CAAC2B,GAAD,CAAD,CAAOE,GAAP,CAAW,kBAAX,EAA+B,OAA/B;AACA7B,YAAAA,CAAC,CAAC2B,GAAD,CAAD,CAAOE,GAAP,CAAW,SAAX,EAAsB,KAAtB;AAClB,WAHc,MAIV;AACJ7B,YAAAA,CAAC,CAAC2B,GAAD,CAAD,CAAOE,GAAP,CAAW,kBAAX,EAA+B,WAA/B;AACA;AACW;AACJ;AACJ;;AACD,QAAIoB,MAAM,GAAIvC,QAAQ,CAACC,cAAT,CAAwB,uBAAxB,CAAd;AACAF,IAAAA,UAAU,GAAG,CAACA,UAAd;;AACA,QAAGA,UAAH,EAAe;AACXwC,MAAAA,MAAM,CAACC,SAAP,GAAmB,WAAnB;AACH,KAFD,MAGK;AACDD,MAAAA,MAAM,CAACC,SAAP,GAAmB,aAAnB;AACH;AACJ;;AAEL,sBACI;AAAK,IAAA,EAAE,EAAC,eAAR;AAAA,2BACI;AAAK,MAAA,SAAS,EAAC,gBAAf;AAAA,8BACI;AAAK,QAAA,SAAS,EAAC,QAAf;AAAA,+BACI,QAAC,MAAD;AAAA;AAAA;AAAA;AAAA;AADJ;AAAA;AAAA;AAAA;AAAA,cADJ,eAII;AAAK,QAAA,SAAS,EAAC,WAAf;AAAA,gCACI;AAAK,UAAA,SAAS,EAAC,SAAf;AAAyB,UAAA,KAAK,EAAE;AAACC,YAAAA,SAAS,EAAE;AAAZ,WAAhC;AAAA,kCACA;AAAA,oCACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBADA,eAEA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBAFA,eAGA;AAAA;AAAA;AAAA;AAAA,oBAHA,eAKA;AAAA;AAAA;AAAA;AAAA,oBALA;AAAA;AAAA;AAAA;AAAA;AAAA,kBADA,eASA;AAAI,YAAA,EAAE,EAAC,UAAP;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBATA,eAUA;AAAI,YAAA,EAAE,EAAC;AAAP;AAAA;AAAA;AAAA;AAAA,kBAVA,eAWI;AAAA,oCACI,QAAC,MAAD;AAAQ,cAAA,EAAE,EAAC,uBAAX;AAAmC,cAAA,OAAO,EAAC,mBAA3C;AAA+D,cAAA,IAAI,EAAC,IAApE;AAAyE,cAAA,OAAO,EAAEJ,aAAlF;AAAiG,cAAA,KAAK,EAAE;AAACK,gBAAAA,YAAY,EAAE;AAAf,eAAxG;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBADJ,eAEI;AAAO,cAAA,EAAE,EAAC,aAAV;AAAwB,cAAA,KAAK,EAAE;AAACC,gBAAAA,KAAK,EAAE;AAAR;AAA/B;AAAA;AAAA;AAAA;AAAA,oBAFJ;AAAA;AAAA;AAAA;AAAA;AAAA,kBAXJ,eAeI;AAAA,oCACI,QAAC,MAAD;AAAQ,cAAA,EAAE,EAAC,uBAAX;AAAmC,cAAA,KAAK,EAAE;AAAED,gBAAAA,YAAY,EAAE,MAAhB;AAAwBE,gBAAAA,WAAW,EAAE,MAArC;AAA6CC,gBAAAA,UAAU,EAAE,MAAzD;AAAiEC,gBAAAA,KAAK,EAAE;AAAxE,eAA1C;AAA2H,cAAA,OAAO,EAAC,mBAAnI;AAAuJ,cAAA,OAAO,EAAER,aAAhK;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBADJ,eAEI,QAAC,MAAD;AAAQ,cAAA,EAAE,EAAC,mBAAX;AAA+B,cAAA,KAAK,EAAE;AAAEI,gBAAAA,YAAY,EAAE,MAAhB;AAAwBE,gBAAAA,WAAW,EAAE,MAArC;AAA6CC,gBAAAA,UAAU,EAAE,MAAzD;AAAiEC,gBAAAA,KAAK,EAAE;AAAxE,eAAtC;AAAuH,cAAA,OAAO,EAAC,mBAA/H;AAAkJ,cAAA,OAAO,EAAEb,SAA3J;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBAFJ;AAAA;AAAA;AAAA;AAAA;AAAA,kBAfJ,eAmBI;AAAA,oCACA;AAAK,cAAA,GAAG,EAAE1C,aAAV;AAAyB,cAAA,GAAG,EAAC;AAA7B;AAAA;AAAA;AAAA;AAAA,oBADA,eAEI;AAAA,qCAAY;AAAM,gBAAA,KAAK,EAAC,oXAAZ;AAAA,uCAE8E;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAF9E;AAAA;AAAA;AAAA;AAAA;AAAZ;AAAA;AAAA;AAAA;AAAA,oBAFJ;AAAA;AAAA;AAAA;AAAA;AAAA,kBAnBJ;AAAA;AAAA;AAAA;AAAA;AAAA,gBADJ,eA2BI,QAAC,MAAD;AAAA;AAAA;AAAA;AAAA,gBA3BJ;AAAA;AAAA;AAAA;AAAA;AAAA,cAJJ;AAAA;AAAA;AAAA;AAAA;AAAA;AADJ;AAAA;AAAA;AAAA;AAAA,UADJ;AAsCC,CA1MD;;GAAMG,Y;UAEaP,W;;;KAFbO,Y;AA8MN,eAAeA,YAAf","sourcesContent":["import React from 'react';\r\nimport '../../../css/App.css';\r\nimport Navbar from '../../../components/Navbar';\r\nimport Footer from '../../../components/Footer';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport Button from 'react-bootstrap/Button';\r\nimport { useEffect } from \"react\";\r\nimport $ from 'jquery';\r\nimport colorspectrum from '../../../images/raw/large/Spectrum.png';\r\nimport Create3DArray from '../../../utils/Create3DArray';\r\nimport GetImageData from '../../../utils/GetImageData';\r\n\r\n\r\nconst ImageMarking = () => {\r\n    let index = 1;\r\n    let navigate = useNavigate();\r\n    var userData = undefined;\r\n    var testActive = false;\r\n\r\n    useEffect(() => {\r\n        document.getElementById(\"animal\").innerHTML =  GetImageData(index-1)[1];\r\n        if(window.sessionStorage.getItem('pixelData') == null) {\r\n            userData = Create3DArray(5,7,7);\r\n            window.sessionStorage.setItem('pixelData', JSON.stringify(userData));\r\n        }\r\n        else {\r\n            userData = JSON.parse(window.sessionStorage.getItem('pixelData'));\r\n        }\r\n        createPixelMask();\r\n        SetImageValues()        \r\n      },[])\r\n    \r\n    function SetImageValues() {\r\n        var table = document.getElementById('pixel_Table')\r\n        var row;\r\n        for (var i = 0, row; row = table.rows[i]; i++) {\r\n            for (var j = 0, col; col = row.cells[j]; j++) {\r\n                if(userData[index-1][i][j] != null) {\r\n                    $(col).css(\"opacity\", userData[index-1][i][j]);\r\n                }\r\n                else {\r\n                    $(col).css(\"opacity\", \"0.0\");\r\n                }\r\n            }\r\n        }\r\n        document.getElementById(\"pixel_Table\").style.backgroundImage = 'url(' + GetImageData(index-1)[0] + ')';\r\n    }\r\n\r\n    function createPixelMask(){\r\n\r\n        var table = document.getElementById(\"pixel_Table\");\r\n        var row;\r\n        var cell;\r\n        for(var i=0;i<7;i++){\r\n            row = table.insertRow(i);\r\n              for(var j=0;j<7;j++){\r\n                cell = row.insertCell(j);\r\n                cell.addEventListener('click', IncreaseOpacity);\r\n                cell.addEventListener('contextmenu', DecreaseOpacity)\r\n            }\r\n        }\r\n    }\r\n    \r\n    function DecreaseOpacity(event) {\r\n        if(!testActive) {\r\n            event.preventDefault()\r\n            var opacity_level = parseFloat($(event.target).css(\"opacity\"));\r\n            if (opacity_level > \"0.25\") {\r\n                opacity_level = opacity_level - 0.50;\r\n                $(event.target).css(\"opacity\", opacity_level);\r\n            }\r\n\t\t\telse if (opacity_level > \"0.0\") {\r\n                opacity_level = opacity_level - 0.25;\r\n                $(event.target).css(\"opacity\", opacity_level);\r\n            }\r\n        }\r\n\t}\r\n\t\t\r\n\tfunction IncreaseOpacity(event) {\r\n        if(!testActive) {\r\n            var opacity_level = parseFloat($(event.target).css(\"opacity\"));\r\n            if (opacity_level < \"0.25\") {\r\n                opacity_level = opacity_level + 0.25;\t\r\n            }\r\n            else if (opacity_level < \"0.75\") {\r\n\t\t\t\topacity_level = opacity_level + 0.50;\r\n\t\t\t}\r\n\t\t\telse {\r\n                opacity_level = 0.0;\r\n            }\r\n            $(event.target).css(\"opacity\", opacity_level);\t\r\n        }\r\n\t}\r\n\r\n    function NextImage() {\r\n        saveData();\r\n        if(index == 5) {\r\n            Next();\r\n        }\r\n        else {     \r\n        index = index + 1;\r\n        var imageCount = index;\r\n        document.getElementById(\"headline\").innerHTML = \"Bild \" + imageCount + \" av 5\";\r\n        document.getElementById(\"animal\").innerHTML =  GetImageData(index-1)[1];\r\n        SetImageValues();\r\n        testActive = true;\r\n        changeOpacity()\r\n        }\r\n    }\r\n\r\n    function PreviousImage() {\r\n        saveData();\r\n        if(index == 1) {\r\n            navigate('/home')\r\n        }\r\n        else {         \r\n            index = index - 1;\r\n            var imageCount = index;\r\n            document.getElementById(\"headline\").innerHTML = \"Bild \" + imageCount + \" av 5\";\r\n            document.getElementById(\"animal\").innerHTML =  GetImageData(index-1)[1];\r\n            SetImageValues();\r\n            testActive = true;\r\n            changeOpacity()\r\n        }\r\n    }\r\n\r\n    function saveData() {\r\n        var table = document.getElementById('pixel_Table')\r\n    \t\tfor (var i = 0, row; row = table.rows[i]; i++) {\r\n        \t\tfor (var j = 0, col; col = row.cells[j]; j++) {\r\n                    if(parseFloat($(col).css(\"opacity\")) == \"1.0\")  {\r\n                        userData[index-1][i][j] = \"0.0\";  \r\n                    }\r\n                    else {\r\n                        userData[index-1][i][j] = $(col).css(\"opacity\");\r\n                    }\r\n                }\r\n            } \r\n        window.sessionStorage.setItem('pixelData', JSON.stringify(userData));         \r\n    }\r\n\r\n    function Next() {\r\n        navigate('/survey/image-ranking')        \r\n    }\r\n\r\n    function changeOpacity() {\r\n        var table = document.getElementById('pixel_Table')\r\n        var row;\r\n        for (var i = 0, row; row = table.rows[i]; i++) {\r\n            for (var j = 0, col; col = row.cells[j]; j++) {\r\n                if(testActive) {\r\n                    if(parseFloat($(col).css(\"opacity\")) == \"1.0\") {                   \r\n                        $(col).css(\"opacity\", \"0.0\");\r\n                    }\r\n\t\t\t\t\t$(col).css(\"background-color\", \"#4ee534\");\r\n                }\r\n                else {\r\n                    if(parseFloat($(col).css(\"opacity\")) == \"0.0\") {\r\n                        $(col).css(\"background-color\", \"black\");\r\n                        $(col).css(\"opacity\", \"1.0\");\r\n\t\t\t\t\t} \r\n\t\t\t\t\telse {\r\n\t\t\t\t\t\t$(col).css(\"background-color\", \"#ffffff00\");\t\t\t\t\t\r\n\t\t\t\t\t}\r\n                }\r\n            }\r\n        }\r\n        var button =  document.getElementById('change-opacity-button');\r\n        testActive = !testActive;\r\n        if(testActive) {\r\n            button.innerText = \"Vanlig vy\";\r\n        }\r\n        else {\r\n            button.innerText = \"Mörklägg vy\";\r\n        }\r\n    }\r\n\r\nreturn (\r\n    <div id=\"image-marking\">\r\n        <div className=\"main-container\">\r\n            <div className=\"header\">\r\n                <Navbar/>\r\n            </div>\r\n            <div className=\"container\">\r\n                <div className=\"content\" style={{textAlign: \"center\"}}>\r\n                <div>\r\n                <h1>Del 1</h1>\r\n                <h4>Bildmarkering</h4>\r\n                <br>\r\n                </br>\r\n                <br>\r\n                </br>\r\n                </div>\r\n                <h5 id=\"headline\">Bild 1 av 5</h5>\r\n                <h5 id=\"animal\"></h5>\r\n                    <div>\r\n                        <Button id=\"change-opacity-button\" variant=\"outline-secondary\" size=\"sm\" onClick={changeOpacity} style={{marginBottom: \"5px\"}}>Mörklägg vy</Button>               \r\n                        <table id=\"pixel_Table\" style={{float: \"none\"}}></table>                           \r\n                    </div>                 \r\n                    <div>\r\n                        <Button id=\"Previous-button-part1\" style={{ marginBottom: \"20px\", marginRight: \"20px\", marginLeft: \"20px\", width: \"90px\"}} variant=\"outline-secondary\" onClick={PreviousImage}>Tillbaka</Button>\r\n                        <Button id=\"Next-button-part1\" style={{ marginBottom: \"20px\", marginRight: \"20px\", marginLeft: \"20px\", width: \"90px\"}} variant=\"outline-secondary\"onClick={NextImage}>Nästa</Button>       \r\n                    </div>\r\n                    <figure>\r\n                    <img src={colorspectrum} alt=\"Spektrum\" />\r\n                        <figcaption><abbr title=\"Högsta graden innebär att den rutan ensam är tillräckligt för att identifiera djuret.\\n\r\n                        Medelgraden innebär att djuret är identifierbart med hjälp av den rutan, men enbart i kombination med en eller flera av de andra rutorna med samma grad.\\n\r\n                        Lägsta graden, en ruta utan markering, indikerar att rutan är oviktig för identifiering.\"><h5>Gradskala</h5></abbr></figcaption>\r\n                    </figure>\r\n                </div> \r\n                <Footer/>\r\n            </div>\r\n        </div>\r\n    </div>\r\n    )   \r\n}\r\n\r\n\r\n\r\nexport default ImageMarking;"]},"metadata":{},"sourceType":"module"}